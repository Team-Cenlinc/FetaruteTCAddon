# 配置模板合并（ConfigUpdater）

## 目标
- 服务器升级配置版本时，保留用户已修改的值。
- 新增配置项时，自动把对应注释一起补进 `config.yml`，方便运维读取。

## 合并策略
1) 以模板为基准：模板里的新增键会被补入用户配置。
2) 以用户为优先：用户已存在的键会保留原值，不会被模板覆盖。
3) `config-version` 始终使用模板版本。

## 注释处理规则
- 仅支持“单行 key-value / key: 空值”的注释合并。
- 模板中的“前置注释”会跟随对应 key 或 section 一起插入。
- 列表项（`- item`）与多行结构不会参与注释合并。

## 已知限制
- 复杂 YAML 结构（多行字符串、嵌套列表）不会被重排，仅保留用户原样。
- 若用户删除了整个父级段，合并会插入模板中的完整 section 块。

## 运维建议
- 遇到大版本升级时，仍建议对照模板复查关键参数。
