<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- 需要暴露底层实例或外部托管对象的场景，集中抑制 EI/EI2 -->

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.FetaruteTCAddon"/>
        <Method name="getLoggerManager"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.company.model.CompanyMember"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.utils.LoggerManager"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.utils.LoggerManager"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.JdbcStorageProvider"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.JdbcStorageProvider"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.JdbcStorageTransaction"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.JdbcStorageTransaction"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.JdbcStorageTransactionManager"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.command.FtaInfoCommand"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.command.FtaRootCommand"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.command.FtaStorageCommand"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.config.ConfigManager"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.dispatcher.sign.SignRemoveListener"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.StorageManager"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.StorageManager"/>
        <Method name="applySchemaIfReady"/>
        <Bug pattern="SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.utils.ConfigUpdater"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <!-- 使用表前缀动态组装 SQL，表名来自白名单，安全性由代码保证 -->
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.repository.JdbcPlayerIdentityRepository"/>
        <Bug pattern="SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.jdbc.repository.JdbcCompanyRepository"/>
        <Bug pattern="SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING"/>
    </Match>

    <!-- 测试夹具在 setUp 中清理测试文件，空值路径已由 JUnit 环境保障 -->
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.JdbcRepositoryTest"/>
        <Method name="setUp"/>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
    </Match>
    <Match>
        <Class name="org.fetarute.fetaruteTCAddon.storage.JdbcRepositoryTest"/>
        <Method name="lambda$setUp$0"/>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
    </Match>
</FindBugsFilter>
